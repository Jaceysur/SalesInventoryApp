using SalesInventoryApp.Factories; using SalesInventoryApp.Repositories; using System; using System.Windows.Forms; namespace SalesInventoryApp { public partial class AddProductForm : Form { private readonly IProductRepository _repo; public AddProductForm(IProductRepository repo) { _repo = repo; InitializeComponent(); } private void btnAdd_Click(object sender, EventArgs e) { if (string.IsNullOrWhiteSpace(txtName.Text) || string.IsNullOrWhiteSpace(txtSKU.Text)) { MessageBox.Show("Name and SKU required."); return; } if (!decimal.TryParse(txtPrice.Text, out decimal price)) { MessageBox.Show("Invalid price"); return; } if (!int.TryParse(txtStock.Text, out int stock)) { MessageBox.Show("Invalid stock"); return; } var id = SalesInventoryApp.Data.DataStore.Instance.NextProductId++; var product = ProductFactory.Create(txtName.Text.Trim(), txtSKU.Text.Trim(), price, stock, id); _repo.Add(product); this.DialogResult = DialogResult.OK; this.Close(); } } }